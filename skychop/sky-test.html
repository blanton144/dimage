<html>
<head>
<title>Sky Map Test</title>
<script src="http://maps.google.com/maps?file=api&amp;v=2.x&amp;key=ABQIAAAApf7xUVmwSCZbEk-2IaOhQRQJG7NHkz3t4sN6fLBno0qVUQLbrhSt7A62doZlkAz4sWDWxhAyFYfQuQ"
  type="text/javascript"></script>
<script type="text/javascript">
var map;
function makeMark (ra, dec, description, map){
  var mark = new GMarker(new GLatLng(dec, ra2lon(ra)), { title : description });
  mark.bindInfoWindowHtml("Want to know more?<br><a href=\"http://www.google.com\">Google it!</a>");
  map.addOverlay(mark);
}
function ra2lon(ra){
  var lon = 180 - ra;
  return lon;
}
function lon2ra(lon){
  var ra = 180 - lon;
  return ra;
}
function addImage(url, ramin, ramax, decmin, decmax, map){
  var sw = new GLatLng(decmin, ra2lon(ramax));
  var ne = new GLatLng(decmax, ra2lon(ramin));
  var img = new GGroundOverlay(url, new GLatLngBounds(sw, ne));
  map.addOverlay(img);
}
function writeCenter(map){
  document.getElementById("output").innerHTML = "RA: " + lon2ra(map.getCenter().lng()) + "<br>DEC: " + map.getCenter().lat();
}
function writeSize(map){
	var bounds = map.getBounds();
	document.getElementById("corners").innerHTML = "SW Corner: " + bounds.getSouthWest() + "<br>NE Corner: " + bounds.getNorthEast();
}
function CenterVP(){
  var ra = document.getElementById("RA").value;
  var dec = document.getElementById("DEC").value;
  map.panTo(new GLatLng(dec, ra2lon(ra)));
}
function initialize() {
  if(GBrowserIsCompatible()){
    map = new GMap2(document.getElementById("sky_map"), {
      mapTypes : G_SKY_MAP_TYPES
      });
    var p = new GMercatorProjection(20);
    var mt = map.getMapTypes();
    mt[0].getProjection = function() {return p;}
    mt[0].getMaximumResolution = function() {return 13;}
    mt[0].getMinimumResolution = function() {return 2;}
    map.setCenter(new GLatLng(54.34917, ra2lon(210.80415)), 10);
    map.addControl(new GLargeMapControl());
    GEvent.addListener(map, "moveend", function() {
      writeCenter(map);
	  writeSize(map);
    });
  }
}
</script>

<head>
<body onLoad="initialize()" onUnload="GUnload()">
<h1>Sky Map Test</h1>
<div id="input">
<table>
  <tr>
   <td>RA: </td><td><input type="text" id="RA" value="0.0"/></td>
  </tr>
  <tr>
   <td>DEC: </td><td><input type="text" id="DEC" value="0.0"/></td>
  </tr>
  <tr>
   <td colspan="2"><input type="button" id="center" value="Recenter Viewport" onClick="CenterVP()"/></td>
  </tr>
</table>
</div>
<center>
<div id="sky_map" style="height:500px;width:500px">
</div>
</center>
<div id="output">
</div>
<div id="corners">
</div>
</body>
</html>


