<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
     PUBLIC "-//W3C//DTD XHTML 1.1//EN"
     "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<!-- This file was generated by make_html_help.pro -->
<head>
<title>IDL Help for DIMAGE</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
<body>
<h1>IDL Help for DIMAGE</h1>
<h2>Overview</h2>
<p>This page was created by the IDL library routine 
<code>make_html_help</code>.  For more information on 
this routine, refer to the IDL Online Help Navigator 
or type: </p>
<pre>     ? make_html_help</pre>
<p>at the IDL command line prompt.</p>
<p><strong>Last modified: </strong>Tue Sep 28 11:01:12 2010.</p>
<hr />
<h2><a id="ROUTINELIST">List of Routines</a></h2>
<ul>
<li><a href="#ARRAY_TO_FLOT">ARRAY_TO_FLOT</a>-- 
create a flot-style data command for an array pair</li>
<li><a href="#ATV2">ATV2</a>-- Interactive display of 2-D images.</li>
<li><a href="#ATV3">ATV3</a>-- Interactive display of 2-D images.</li>
<li><a href="#CONC2N">CONC2N</a>-- 
convert an r90/r50 concentration to a Sersic n</li>
<li><a href="#DASYMMETRY">DASYMMETRY</a>-- measure asymmetry in the image</li>
<li><a href="#DCEN3X3">DCEN3X3</a>-- 
fit center to a 3x3 image with a peak in the center</li>
<li><a href="#DCHILDREN">DCHILDREN</a>-- 
deblend children of a parent, in multi-band, multi-res images</li>
<li><a href="#DCHILDREN_ATLAS[1]">DCHILDREN_ATLAS[1]</a>-- 
deblend children of a parent atlas image</li>
<li><a href="#DCHILDREN_ATLAS[2]">DCHILDREN_ATLAS[2]</a>-- 
deblend children of a parent atlas image</li>
<li><a href="#DCLUMPY">DCLUMPY</a>-- measure clumpiness of a galaxy image</li>
<li><a href="#DETECT">DETECT</a>-- 
detect objects in multi-band, multi-res images</li>
<li><a href="#DETECT_ATLAS">DETECT_ATLAS</a>-- 
detect objects in NASA-Sloan Atlas images</li>
<li><a href="#DETECT_NEW">DETECT_NEW</a>-- 
detect objects in multi-band, multi-res images</li>
<li><a href="#DEXPLORE">DEXPLORE</a>-- interactive explorer of dimage results
</li>
<li><a href="#DEXTRACT">DEXTRACT</a>-- 
extract objects in an image based on object image</li>
<li><a href="#DFAKEGAL">DFAKEGAL</a>-- 
get parameters associated with sersic settings</li>
<li><a href="#DFIND">DFIND</a>-- identify objects in a boolean image</li>
<li><a href="#DFITELLIPSE">DFITELLIPSE</a>-- Fit an ellipse to a mask image</li>
<li><a href="#DFITPSF">DFITPSF</a>-- fit a PSF model to an image</li>
<li><a href="#DFITPSF_ATLAS">DFITPSF_ATLAS</a>-- 
fit a PSF model to an image (special case for atlas images)</li>
<li><a href="#DFLOODFILL">DFLOODFILL</a>-- 
starting at x,y, flood identical, connected pixels to same value</li>
<li><a href="#DFLUXES">DFLUXES</a>-- 
get pixel fluxes of children, given weights and templates</li>
<li><a href="#DGALS">DGALS</a>-- 
find galaxies in multi-band, multi-res images (called by dchildren)</li>
<li><a href="#DIMAGE_FLAGNAME">DIMAGE_FLAGNAME</a>-- 
Return bitmask labels corresponding to bit numbers.</li>
<li><a href="#DIMAGE_FLAGVAL">DIMAGE_FLAGVAL</a>-- 
Return bitmask values corresponding to labels.</li>
<li><a href="#DMEASURE">DMEASURE</a>-- measure a deblended image</li>
<li><a href="#DMEASURE_CHECK">DMEASURE_CHECK</a>-- 
visual check of measurements of deblended image</li>
<li><a href="#DMEASURE_MULTI">DMEASURE_MULTI</a>-- 
Measure multiple bands simultaneously</li>
<li><a href="#DMEDSMOOTH">DMEDSMOOTH</a>-- median smooth</li>
<li><a href="#DOBJECTS">DOBJECTS</a>-- 
detect objects in multi-band, multi-res images</li>
<li><a href="#DPARENTS">DPARENTS</a>-- 
find parent objects in multi-band, multi-res images</li>
<li><a href="#DPARENTS_ATLAS[1]">DPARENTS_ATLAS[1]</a>-- 
detect parents in NASA-Sloan Atlas images</li>
<li><a href="#DPARENTS_ATLAS[2]">DPARENTS_ATLAS[2]</a>-- 
detect parents in NASA-Sloan Atlas images</li>
<li><a href="#DPEAKS">DPEAKS</a>-- find peaks in an image</li>
<li><a href="#DPETRO">DPETRO</a>-- Measure Petrosian properties of a profile
</li>
<li><a href="#DPREFINE">DPREFINE</a>-- refine a psf center</li>
<li><a href="#DPSFCHECK">DPSFCHECK</a>-- check how well a PSF fits some data
</li>
<li><a href="#DPSFID">DPSFID</a>-- check how well a PSF fits some data</li>
<li><a href="#DPSFREAD">DPSFREAD</a>-- read a PSF structure from a file</li>
<li><a href="#DPSFSELECT_ATLAS">DPSFSELECT_ATLAS</a>-- 
check how well a PSF fits some data</li>
<li><a href="#DPSFSUB">DPSFSUB</a>-- 
return an attempt at subtracting the fit PSF from some image</li>
<li><a href="#DPSFSUB_ATLAS">DPSFSUB_ATLAS</a>-- subtract psfs</li>
<li><a href="#DREADCEN">DREADCEN</a>-- read central image</li>
<li><a href="#DRECENTER">DRECENTER</a>-- 
find a better galaxy center using symmetric templates</li>
<li><a href="#DREFINE">DREFINE</a>-- refine some approximate centers</li>
<li><a href="#DSERSIC">DSERSIC</a>-- run 2d sersic fitting on an image</li>
<li><a href="#DSERSIC2">DSERSIC2</a>-- 
run 2d, two-component sersic fitting on an image</li>
<li><a href="#DSERSIC_PARAMS">DSERSIC_PARAMS</a>-- given flux, r50, n</li>
<li><a href="#DSHIFT">DSHIFT</a>-- shift in 2D with chosen interpolation</li>
<li><a href="#DSIGMA">DSIGMA</a>-- find approximate sigma from image</li>
<li><a href="#DSMOOTH">DSMOOTH</a>-- smooth with a simple gaussian</li>
<li><a href="#DSTARS">DSTARS</a>-- 
find stars in multi-band, multi-res images (called by dchildren)</li>
<li><a href="#DSTARS_ATLAS">DSTARS_ATLAS</a>-- find and subtract stars</li>
<li><a href="#DTEMPLATES">DTEMPLATES</a>-- build templates around centers</li>
<li><a href="#DUMMY_PSF">DUMMY_PSF</a>-- 
return a dummy psf for cases where it is unknown</li>
<li><a href="#DVPSF">DVPSF</a>-- 
given a PSF structure, return the PSF at a particular point</li>
<li><a href="#DWEIGHTS">DWEIGHTS</a>-- fit templates to image</li>
<li><a href="#FIT_MULT_GAUSS">FIT_MULT_GAUSS</a>-- 
fit multiple gaussians centered at center to an image</li>
<li><a href="#GZ_FILE_TEST">GZ_FILE_TEST</a>-- 
file_test, but if it fails, try reading in .gz version</li>
<li><a href="#GZ_HEADFITS">GZ_HEADFITS</a>-- 
headfits, but if it fails, try reading in .gz version</li>
<li><a href="#GZ_MRDFITS">GZ_MRDFITS</a>-- 
mrdfits, but if it fails, try reading in .gz version</li>
<li><a href="#SIMPLEXY">SIMPLEXY</a>-- 
get basic X and Y for brightish sources away from edge of an image</li>
<li><a href="#TWOMASS_CONVERT">TWOMASS_CONVERT</a>-- 
convert twomass images to sky-subtracted versions with nice names</li>
</ul>
<hr />
<h2>Routine Descriptions</h2>
<h3><a id="ARRAY_TO_FLOT">ARRAY_TO_FLOT</a></h3>
<p><a href="#ATV2">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   array_to_flot
 PURPOSE:
   create a flot-style data command for an array pair
 CALLING SEQUENCE:
   array_to_flot, filename, xx, yy
 REVISION HISTORY:
   1-May-2010  Written by Blanton, NYU
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/utils/array_to_flot.pro)</strong></p>
<hr />
<h3><a id="ATV2">ATV2</a></h3>
<p><a href="#ARRAY_TO_FLOT">[Previous Routine]</a></p>
<p><a href="#ATV3">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
       ATV2
 
 PURPOSE: 
       Interactive display of 2-D images.

 CATEGORY: 
       Image display.

 CALLING SEQUENCE:
       atv2 [,array_name OR fits_file] [,min = min_value] [,max=max_value] 
           [,/linear] [,/log] [,/histeq] [,/block]
           [,/align] [,/stretch] [,header = header]

 REQUIRED INPUTS:
       None.  If atv2 is run with no inputs, the window widgets
       are realized and images can subsequently be passed to atv2
       from the command line or from the pull-down file menu.

 OPTIONAL INPUTS:
       array_name: a 2-D data array to display
          OR
       fits_file:  a fits file name, enclosed in single quotes

 KEYWORDS:
       min:        minimum data value to be mapped to the color table
       max:        maximum data value to be mapped to the color table
       linear:     use linear stretch
       log:        use log stretch 
       histeq:     use histogram equalization
       block:      block IDL command line until ATV2 terminates
       align:      align image with previously displayed image
       stretch:    keep same min and max as previous image
       header:     FITS image header (string array) for use with data array
       
 OUTPUTS:
       None.  
 
 COMMON BLOCKS:
       atv2_state:  contains variables describing the display state
       atv2_images: contains the internal copies of the display image
       atv2_color:  contains colormap vectors
       atv2_pdata:  contains plot and text annotation information

 RESTRICTIONS:
       Requires IDL version 5.1 or greater.
       Requires Craig Markwardt's cmps_form.pro routine.
       Requires the GSFC IDL astronomy user's library routines.
       Some features may not work under all operating systems.

 SIDE EFFECTS:
       Modifies the color table.

 EXAMPLE:
       To start atv2 running, just enter the command 'atv2' at the idl
       prompt, either with or without an array name or fits file name 
       as an input.  Only one atv2 window will be created at a time,
       so if one already exists and another image is passed to atv2
       from the idl command line, the new image will be displayed in 
       the pre-existing atv2 window.

 MODIFICATION HISTORY:
       Written by Aaron J. Barth, with contributions by 
       Douglas Finkbeiner, Michael Liu, David Schlegel, and
       Wesley Colley.  First released 17 December 1998.

       This version is 1.4, last modified 23 June 2003.

       For the most current version, revision history, instructions,
       list of known bugs, and further information, go to:
              http://www.astro.caltech.edu/~barth/atv2

       Hacked up by Finkbeiner 5 December 2003 to support healpix.
;-
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/utils/atv2.pro)</strong></p>
<hr />
<h3><a id="ATV3">ATV3</a></h3>
<p><a href="#ATV2">[Previous Routine]</a></p>
<p><a href="#CONC2N">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
       ATV3
 
 PURPOSE: 
       Interactive display of 2-D images.

 CATEGORY: 
       Image display.

 CALLING SEQUENCE:
       atv3 [,array_name OR fits_file] [,min = min_value] [,max=max_value] 
           [,/linear] [,/log] [,/histeq] [,/block]
           [,/align] [,/stretch] [,header = header]

 REQUIRED INPUTS:
       None.  If atv3 is run with no inputs, the window widgets
       are realized and images can subsequently be passed to atv3
       from the command line or from the pull-down file menu.

 OPTIONAL INPUTS:
       array_name: a 2-D data array to display
          OR
       fits_file:  a fits file name, enclosed in single quotes

 KEYWORDS:
       min:        minimum data value to be mapped to the color table
       max:        maximum data value to be mapped to the color table
       linear:     use linear stretch
       log:        use log stretch 
       histeq:     use histogram equalization
       block:      block IDL command line until ATV3 terminates
       align:      align image with previously displayed image
       stretch:    keep same min and max as previous image
       header:     FITS image header (string array) for use with data array
       
 OUTPUTS:
       None.  
 
 COMMON BLOCKS:
       atv3_state:  contains variables describing the display state
       atv3_images: contains the internal copies of the display image
       atv3_color:  contains colormap vectors
       atv3_pdata:  contains plot and text annotation information

 RESTRICTIONS:
       Requires IDL version 5.1 or greater.
       Requires Craig Markwardt's cmps_form.pro routine.
       Requires the GSFC IDL astronomy user's library routines.
       Some features may not work under all operating systems.

 SIDE EFFECTS:
       Modifies the color table.

 EXAMPLE:
       To start atv3 running, just enter the command 'atv3' at the idl
       prompt, either with or without an array name or fits file name 
       as an input.  Only one atv3 window will be created at a time,
       so if one already exists and another image is passed to atv3
       from the idl command line, the new image will be displayed in 
       the pre-existing atv3 window.

 MODIFICATION HISTORY:
       Written by Aaron J. Barth, with contributions by 
       Douglas Finkbeiner, Michael Liu, David Schlegel, and
       Wesley Colley.  First released 17 December 1998.

       This version is 1.4, last modified 23 June 2003.

       For the most current version, revision history, instructions,
       list of known bugs, and further information, go to:
              http://www.astro.caltech.edu/~barth/atv3

       Hacked up by Finkbeiner 5 December 2003 to support healpix.
;-
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/utils/atv3.pro)</strong></p>
<hr />
<h3><a id="CONC2N">CONC2N</a></h3>
<p><a href="#ATV3">[Previous Routine]</a></p>
<p><a href="#DASYMMETRY">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   conc2n
 PURPOSE:
   convert an r90/r50 concentration to a Sersic n
 CALLING SEQUENCE:
   n= conc2n(conc)
 REVISION HISTORY:
   10-Jun-2010  Written by Mike Blanton, NYU
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/sersic/conc2n.pro)</strong></p>
<hr />
<h3><a id="DASYMMETRY">DASYMMETRY</a></h3>
<p><a href="#CONC2N">[Previous Routine]</a></p>
<p><a href="#DCEN3X3">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   dasymmetry
 PURPOSE:
   measure asymmetry in the image
 CALLING SEQUENCE:
   dasymmetry, image, ivar, xcen, ycen, radius, [ axcen=, aycen=, $
     asymmetry=, ba=, phi= ]
 INPUTS:
   image - [nx,ny] input image
   ivar - [nx,ny] inverse variance of input image
   xcen, ycen - initial x,y center
   radius - radius of measurement
 OPTIONAL INPUTS:
   axcen - best asymmetry center of image 
   aycen - best asymmetry center of image 
   ba, phi - use elliptical region (radius is major axis)
 OUTPUTS:
   asymmetry - asymmetry of image
   dflags - flags with results
 REVISION HISTORY:
   10-Aug-2008  Written by Mike Blanton, NYU
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/detect/dasymmetry.pro)</strong></p>
<hr />
<h3><a id="DCEN3X3">DCEN3X3</a></h3>
<p><a href="#DASYMMETRY">[Previous Routine]</a></p>
<p><a href="#DCHILDREN">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   dcen3x3
 PURPOSE:
   fit center to a 3x3 image with a peak in the center
 CALLING SEQUENCE:
   dcen3x3, image, xcen, ycen
 INPUTS:
   image - [3, 3] input image
 OUTPUTS:
   xcen, ycen - fit peak (pixels run from 0-2)
 REVISION HISTORY:
   1-Mar-2006  Written by Blanton, NYU
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/detect/dcen3x3.pro)</strong></p>
<hr />
<h3><a id="DCHILDREN">DCHILDREN</a></h3>
<p><a href="#DCEN3X3">[Previous Routine]</a></p>
<p><a href="#DCHILDREN_ATLAS[1]">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   dchildren
 PURPOSE:
   deblend children of a parent, in multi-band, multi-res images
 CALLING SEQUENCE:
   dchildren, base, iparent [, psfs=, slim=, gsmooth=, glim=, $
      saddle=, xstars=, ystars=, xgals=, ygals=, /hand, ref=, $
      nstars=, /sersic ]
 INPUTS:
   base - FITS image base name
   iparent - parent to process 
 OPTIONAL KEYWORDS:
   /hand - brings up ATV so user can pick galaxy and star centers
   /sersic - fit template with Sersic profile to constrain better
   /aset - use [base]-aset.fits file for parameter setting
   /sgset - use [base]-aset.fits file for star and galaxy locations
   gbig - treat galaxies as &quot;big&quot;: resample smoothed image
           to save memory and ignore the small stuff
 OPTIONAL INPUTS:
   psf - [npx, npy] PSF to assume (if none, doesn't search for stars)
   slim - nsigma limit for point source detection (default 5.)
   glim - nsigma limit for galaxy detection (default 5.)
   gsmooth - smoothing for galaxy detection (default 2.)
   saddle - saddle point for galaxy peak checking (default 100.)
   xstars, ystars - [N] input where you want stars assumed
   xgals, ygals - [N] input where you want galaxies assumed
   ref - reference band (default 0)
   sdss - pass this to dvpsf() to use SDSS PSF estimate
   puse - [Nband] 0 or 1 whether to detect stars and galaxies in each
          band
 REVISION HISTORY:
   11-Jan-2006  Written by Blanton, NYU
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/detect/dchildren.pro)</strong></p>
<hr />
<h3><a id="DCHILDREN_ATLAS[1]">DCHILDREN_ATLAS[1]</a></h3>
<p><a href="#DCHILDREN">[Previous Routine]</a></p>
<p><a href="#DCHILDREN_ATLAS[2]">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   dchildren_atlas
 PURPOSE:
   deblend children of a parent atlas image
 CALLING SEQUENCE:
   dchildren_atlas [, /galex, /noclobber, glim=, puse=puse, tuse=tuse, $
           slim=, gsaddle=, gsmooth=, /nostarim ]
 REVISION HISTORY:
   11-Jan-2006  Written by Blanton, NYU
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/detect/dchildren_atlas.pro)</strong></p>
<hr />
<h3><a id="DCHILDREN_ATLAS[2]">DCHILDREN_ATLAS[2]</a></h3>
<p><a href="#DCHILDREN_ATLAS[1]">[Previous Routine]</a></p>
<p><a href="#DCLUMPY">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   dchildren_atlas
 PURPOSE:
   deblend children of a parent atlas image
 CALLING SEQUENCE:
   dstargal_atlas 
 REVISION HISTORY:
   11-Jan-2006  Written by Blanton, NYU
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/detect/dstargal_atlas.pro)</strong></p>
<hr />
<h3><a id="DCLUMPY">DCLUMPY</a></h3>
<p><a href="#DCHILDREN_ATLAS[2]">[Previous Routine]</a></p>
<p><a href="#DETECT">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   dclumpy
 PURPOSE:
   measure clumpiness of a galaxy image
 CALLING SEQUENCE:
   dclumpy, image, xcen, ycen, annulus, smooth [, ba=, phi=, $
      clumpy=, dflags= ]
 INPUTS:
   image - [nx,ny] input image
   xcen, ycen - initial x,y center
   annulus - [inner, outer] annulus of measurement
   smooth - gaussian smoothing sigma
 OPTIONAL INPUTS:
   ba, phi - use elliptical region (annuli are major axis)
 OUTPUTS:
   clumpy - clumpiness of image
   dflags - flags with results
 REVISION HISTORY:
   10-Aug-2008  Written by Mike Blanton, NYU
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/detect/dclumpy.pro)</strong></p>
<hr />
<h3><a id="DETECT">DETECT</a></h3>
<p><a href="#DCLUMPY">[Previous Routine]</a></p>
<p><a href="#DETECT_ATLAS">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   detect
 PURPOSE:
   detect objects in multi-band, multi-res images 
 CALLING SEQUENCE:
   detect, base, imfile [, /pset, /aset
 INPUTS:
   base - base name for output
   imfiles - [Nband] array of FITS files with images in HDU 0
 OPTIONAL INPUTS:
   ref - integer indicating which imfile is the &quot;reference&quot;
   sky - if set, subtracts a median smoothed sky with this box size
         (in arcsec)
   plim - number of sigma for parent detection (default 5)
   glim - number of sigma for a galaxy detection (default 20)
   slim - number of sigma for a point source detection (default 10)
   gsmooth - smoothing scale for galaxies (default 5)
   single - if set, only process this parent number
   puse - [Nband] 0 or 1, whether to use band to find parents
   pbuffer - fractional buffer to add around parents (default 0.1)
 OPTIONAL KEYWORDS:
   /all - process all parents
   /pset - use &quot;parent&quot; settings from base-pset.fits file
   /aset - use &quot;child&quot; settings from base-aset.fits file
   /sgset - get locations of stars and galaxies from base-sgset.fits file
   /hand - for children, put results in &quot;hand&quot; subdir (used by dexplore)
   /noclobber - do not overwrite previously created files
   /noparentclobber - do not overwrite previously PARENT files
   /gbig - treat galaxies as &quot;big&quot;: resample smoothed image
           to save memory and ignore the small stuff
 COMMENTS:
   When calling automatically, it is best not to use the /hand
     option; reserve that for when dexplore calls this function and you
     have set the parameters by hand.
   Assumes that multi-res images are APPROXIMATELY overlapping
     (within a pixel or two)
   Assumes a sky-subtracted image in HDU 0
   Works better if ivars supplied in HDU 1
   Finds objects, selects largest one to deblend 
   Outputs (assuming imfile is 'base.fits' or 'base.fits.gz'):
     base-dbset.fits - settings, locations of stars and gals, etc
     base-bpsf.fits - &quot;basic&quot; PSF estimate
     base-pcat.fits - locations of parents in full image
     base-parents.fits - in HDUs 2N+1 and 2N+2, imagse and ivars of parents
     base-[parent]-atlas.fits - images of children of biggest parent
     base-[parent].tar.gz - tar file with JPGs, etc
 REVISION HISTORY:
   11-Jan-2006  Written by Blanton, NYU
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/detect/detect.pro)</strong></p>
<hr />
<h3><a id="DETECT_ATLAS">DETECT_ATLAS</a></h3>
<p><a href="#DETECT">[Previous Routine]</a></p>
<p><a href="#DETECT_NEW">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   detect_atlas
 PURPOSE:
   detect objects in NASA-Sloan Atlas images
 CALLING SEQUENCE:
   detect_atlas
 OPTIONAL KEYWORDS:
   /galex - assume ugrizNF (N and F from GALEX)
   /noclobber - do not overwrite previously created files
   /noparentclobber - do not overwrite previously PARENT files
 COMMENTS:
   Assumes input file names of the form:
      [base]-[ugriz].fits.gz
    where [base] is the current directory name. If /galex is set, 
    includes -nd and -fd images from GALEX too.
   Assumes that the images are APPROXIMATELY overlapping
     (within a pixel or two) at least
   Assumes a sky-subtracted image in HDU 0
   Works better if ivars supplied in HDU 1
 REVISION HISTORY:
   11-Jan-2006  Written by Blanton, NYU
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/detect/detect_atlas.pro)</strong></p>
<hr />
<h3><a id="DETECT_NEW">DETECT_NEW</a></h3>
<p><a href="#DETECT_ATLAS">[Previous Routine]</a></p>
<p><a href="#DEXPLORE">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   detect_new
 PURPOSE:
   detect objects in multi-band, multi-res images 
 CALLING SEQUENCE:
   detect_new, base, imfiles
 INPUTS:
   base - base name for output
   imfiles - [Nband] array of FITS files with images in HDU 0
 OPTIONAL INPUTS:
   ref - integer indicating which imfile is the &quot;reference&quot;
   sky - if set, subtracts a median smoothed sky with this box size
         (in arcsec)
   plim - number of sigma for parent detection (default 5)
   glim - number of sigma for a galaxy detection (default 20)
   slim - number of sigma for a point source detection (default 10)
   gsmooth - smoothing scale for galaxies (default 5)
   single - if set, only process this parent number
   puse - [Nband] 0 or 1, whether to use band to find parents
   pbuffer - fractional buffer to add around parents (default 0.1)
 OPTIONAL KEYWORDS:
   /sdss - assume ugriz
   /gsdss - assume ugrizNF (N and F from GALEX)
   /all - process all parents
   /hand - for children, put results in &quot;hand&quot; subdir (used by dexplore)
   /noclobber - do not overwrite previously created files
   /noparentclobber - do not overwrite previously PARENT files
   /pset - use &quot;parent&quot; settings from base-pset.fits file
   /aset - use &quot;child&quot; settings from base-aset.fits file
   /sgset - get locations of stars and galaxies from base-sgset.fits file
 COMMENTS:
   When calling automatically, it is best not to use the /hand
     option; reserve that for when dexplore calls this function and you
     have set the parameters by hand.
   Assumes that multi-res images are APPROXIMATELY overlapping
     (within a pixel or two)
   Assumes a sky-subtracted image in HDU 0
   Works better if ivars supplied in HDU 1
 REVISION HISTORY:
   11-Jan-2006  Written by Blanton, NYU
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/detect/detect_new.pro)</strong></p>
<hr />
<h3><a id="DEXPLORE">DEXPLORE</a></h3>
<p><a href="#DETECT_NEW">[Previous Routine]</a></p>
<p><a href="#DEXTRACT">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   dexplore
 PURPOSE:
   interactive explorer of dimage results
 CALLING SEQUENCE:
   dexplore [, base ]
 OPTIONAL INPUTS:
   base - base name for output (otherwise uses current dir name)
 REVISION HISTORY:
   11-Jan-2006  Written by Blanton, NYU
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/detect/dexplore.pro)</strong></p>
<hr />
<h3><a id="DEXTRACT">DEXTRACT</a></h3>
<p><a href="#DEXPLORE">[Previous Routine]</a></p>
<p><a href="#DFAKEGAL">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   dextract
 PURPOSE:
   extract objects in an image based on object image
 CALLING SEQUENCE:
   dextract, image, invvar, object=object, extract=extract [, small=]
 INPUTS:
   image - [nx, ny] input image
   invvar - [nx, ny] input image inverse variance
   object - [nx, ny] which object each pixel corresponds to
 OPTIONAL INPUTS:
   small - if set, only process objects with size of detected area
           smaller than this value
 OUTPUTS:
   extract - [N] arrays of structures with objects and properties
                 .XST - X start of atlas
                 .YST - Y start of atlas
                 .XND - X end of atlas
                 .YND - Y end of atlas
                 .XCEN
                 .YCEN
                 .ATLAS - atlas structure
 REVISION HISTORY:
   11-Jan-2006  Written by Blanton, NYU
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/detect/dextract.pro)</strong></p>
<hr />
<h3><a id="DFAKEGAL">DFAKEGAL</a></h3>
<p><a href="#DEXTRACT">[Previous Routine]</a></p>
<p><a href="#DFIND">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   dfakegal
 PURPOSE:
   get parameters associated with sersic settings
 CALLING SEQUENCE:
   im= dfakegal([ sersicn=, r50=, flux=, phi0=, ba=, /simple, $
                  nx=, ny=, xcen=, ycen=, sersic= ])
 INPUTS:
   flux - flux (default 1.)
   sersicn - Sersic index (default 1.)
   r50 - half-light radius (default 1.)
   phi0 - position angle (deg counterclockwise from up, default 0.)
   ba - axis ratio (b/a, default 1.)
   nx, ny - size of output image (defuat 
 OUTPUTS:
   amp - amplitude 
   r0 - radius
 OPTIONAL OUTPUTS:
 OPTIONAL INPUTS/OUTPUTS:
 COMMENTS:
   I(r)= amp*exp(-(r/r0)^(1/n))
 DEPENDENCIES:
 BUGS:
 REVISION HISTORY:
   2003-09-21  Written MRB (NYU)
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/sersic/dfakegal.pro)</strong></p>
<hr />
<h3><a id="DFIND">DFIND</a></h3>
<p><a href="#DFAKEGAL">[Previous Routine]</a></p>
<p><a href="#DFITELLIPSE">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   dfind
 PURPOSE:
   identify objects in a boolean image
 CALLING SEQUENCE:
   dfind, image [, object= ]
 INPUTS:
   image - [nx, ny] input image
 OUTPUTS:
   object - [nx, ny] -1 where no object, object # otherwise
 REVISION HISTORY:
   11-Jan-2006  Written by Blanton, NYU
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/detect/dfind.pro)</strong></p>
<hr />
<h3><a id="DFITELLIPSE">DFITELLIPSE</a></h3>
<p><a href="#DFIND">[Previous Routine]</a></p>
<p><a href="#DFITPSF">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   dfitellipse
 PURPOSE:
   Fit an ellipse to a mask image
 CALLING SEQUENCE:
   dfitellipse, mask, xcen, ycen, ellipse=ellipse
 INPUTS:
   mask - [nx,ny] input mask image (0 or 1)
   xcen, ycen - x,y center
 OUTPUTS:
   iso - structure with results
 COMMENTS:
   Smoothes (mask gt 0) with a 1 pixel Gaussian; then subtracts
   -0.5. Then fits for an ellipse by maximizing the sum of the
   pixels within it.
 REVISION HISTORY:
   10-Aug-2008  Written by Mike Blanton, NYU
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/detect/dfitellipse.pro)</strong></p>
<hr />
<h3><a id="DFITPSF">DFITPSF</a></h3>
<p><a href="#DFITELLIPSE">[Previous Routine]</a></p>
<p><a href="#DFITPSF_ATLAS">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   dfitpsf
 PURPOSE:
   fit a PSF model to an image
 CALLING SEQUENCE:
   dfitpsf, imfile
 INPUTS:
   imfile - input FITS file
 OPTIONAL INPUTS:
   natlas   - size of the PSF postage stamp (default 41)
   maxnstar - maximum number of stars to use when constructing the
              PSF (default 200)
   
 KEYWORD PARAMETERS:
   noclobber - if the PSF files already exist, do nothing and return 
 COMMENTS:
   Currently always uses Nc=1 (no varying PSFs allowed)
   Seems to work OK but many arbitrary parameters.
   Ouputs (imfile is base.fits or base.fits.gz):
     base-bpsf.fits - basic (single-fit) PSF
 REVISION HISTORY:
   11-Jan-2006  Written by Blanton, NYU
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/psf/dfitpsf.pro)</strong></p>
<hr />
<h3><a id="DFITPSF_ATLAS">DFITPSF_ATLAS</a></h3>
<p><a href="#DFITPSF">[Previous Routine]</a></p>
<p><a href="#DFLOODFILL">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   dfitpsf_atlas
 PURPOSE:
   fit a PSF model to an image (special case for atlas images)
 CALLING SEQUENCE:
   dfitpsf_atlas, imfile
 INPUTS:
   imfile - input FITS file
 COMMENTS:
   Ouputs (imfile is base.fits or base.fits.gz):
     base-bpsf.fits - basic (single-fit) PSF
 REVISION HISTORY:
   11-Jan-2006  Written by Blanton, NYU
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/psf/dfitpsf_atlas.pro)</strong></p>
<hr />
<h3><a id="DFLOODFILL">DFLOODFILL</a></h3>
<p><a href="#DFITPSF_ATLAS">[Previous Routine]</a></p>
<p><a href="#DFLUXES">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   dfloodfill
 PURPOSE:
   starting at x,y, flood identical, connected pixels to same value
 CALLING SEQUENCE:
   newim= dfloodfill(im, x, y, newval [, xst=, yst=, xnd=, ynd=])
 INPUTS:
   im- [nx, ny] input image
   x, y - pixel value to start flood at
   newval - value to set new pixels to
 OPTIONAL INPUTS:
   xst, xnd, yst, ynd - boundaries of floodable region 
                        [defaults of 0, nx-1, 0, ny-1, respectively]
 OUTPUTS:
   newim - [nx, ny] output image with flooded pixels replaced with newval
 REVISION HISTORY:
   11-Jan-2006  Written by Blanton, NYU
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/utils/dfloodfill.pro)</strong></p>
<hr />
<h3><a id="DFLUXES">DFLUXES</a></h3>
<p><a href="#DFLOODFILL">[Previous Routine]</a></p>
<p><a href="#DGALS">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   dfluxes
 PURPOSE:
   get pixel fluxes of children, given weights and templates
 CALLING SEQUENCE:
   dfluxes, image, templates, weights, xcen, ycen, children= [, sigma= ]
 INPUTS:
   image - [nx, ny] input image
   templates - [nx, ny, N] templates 
   weights - [N] weights of templates 
   xcen, ycen - [N] centers of templates 
 OPTIONAL INPUTS;
   sigma - error level of image
 OUTPUTS:
   children - [nx, ny, N] resulting children
 REVISION HISTORY:
   11-Jan-2006  Written by Blanton, NYU, based on RHL deblend
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/detect/dfluxes.pro)</strong></p>
<hr />
<h3><a id="DGALS">DGALS</a></h3>
<p><a href="#DFLUXES">[Previous Routine]</a></p>
<p><a href="#DIMAGE_FLAGNAME">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   dgals
 PURPOSE:
   find galaxies in multi-band, multi-res images (called by dchildren)
 REVISION HISTORY:
   11-Jan-2006  Written by Blanton, NYU
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/detect/dgals.pro)</strong></p>
<hr />
<h3><a id="DIMAGE_FLAGNAME">DIMAGE_FLAGNAME</a></h3>
<p><a href="#DGALS">[Previous Routine]</a></p>
<p><a href="#DIMAGE_FLAGVAL">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   dimage_flagname

 PURPOSE:
   Return bitmask labels corresponding to bit numbers.

 CALLING SEQUENCE:
   label = dimage_flagname(flagprefix, flagvalue, [ /concat, /silent ] )

 INPUTS:
   flagprefix - Flag name (scalar string).  The following are supported:
                SPPIXMASK, TARGET, TTARGET.
   flagvalue  - Signed long with any number of its bits set.

 OPTIONAL KEYWORDS:
   concat     - If set, then concatenate all of the output labels in
                LABEL into a single whitespace-separated string.
   silent     - If set, then don't print a warning when there is no bit label
                corresponding to one of the bit values.

 OUTPUTS:
   label      - String name(s) corresponding to each non-zero bit in FLAGVALUE.

 OPTIONAL OUTPUTS:

 COMMENTS:
   This function is the inverse of DIMAGE_FLAGVAL().

 EXAMPLES:

 BUGS:

 PROCEDURES CALLED:
   splog
   yanny_free
   yanny_read

 DATA FILES:
   $DIMAGE_DIR/data/dimage/dimage_maskbits.par

 REVISION HISTORY:
   01-Apr-2002 Written by D. Schlegel, Princeton.
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/utils/dimage_flagname.pro)</strong></p>
<hr />
<h3><a id="DIMAGE_FLAGVAL">DIMAGE_FLAGVAL</a></h3>
<p><a href="#DIMAGE_FLAGNAME">[Previous Routine]</a></p>
<p><a href="#DMEASURE">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   dimage_flagval

 PURPOSE:
   Return bitmask values corresponding to labels.

 CALLING SEQUENCE:
   value = dimage_flagval(flagprefix, label)

 INPUTS:
   flagprefix - Flag name (scalar string).  The following are supported:
                SPPIXMASK, TARGET, TTARGET.
   label      - String name(s) corresponding to each non-zero bit in FLAGVALUE.

 OPTIONAL KEYWORDS:

 OUTPUTS:
   value      - Signed long with any number of its bits set.

 OPTIONAL OUTPUTS:

 COMMENTS:
   This function is the inverse of DIMAGE_FLAGNAME().

 DATA FILES:
   $DIMAGE_DIR/data/dimage/dimage_maskbits.par

 REVISION HISTORY:
   02-Apr-2002 Written by D. Schlegel, Princeton.
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/utils/dimage_flagval.pro)</strong></p>
<hr />
<h3><a id="DMEASURE">DMEASURE</a></h3>
<p><a href="#DIMAGE_FLAGVAL">[Previous Routine]</a></p>
<p><a href="#DMEASURE_CHECK">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   dmeasure
 PURPOSE:
   measure a deblended image
 CALLING SEQUENCE:
   dmeasure, image, ivar [, xcen=, ycen=, measure=, /check ]
 INPUTS:
   image - [nx,ny] input image
 OPTIONAL INPUTS:
   invvar - [nx,ny] input inverse variance [default to unity everywhere]
   xcen - center of image [default to maximum of image]
   ycen - center of image [default to maximum of image]
   faper - fiber aperture diameter in pix for fiberflux [default
           7.57576]
   cpetrorad - fixed petrosian radius to assume
 OPTIONAL KEYWORDS:
   /check - display image and overplot checks
 OUTPUTS:
   measure - parameters of measurements
 REVISION HISTORY:
   10-Aug-2008  Written by Mike Blanton, NYU
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/detect/dmeasure.pro)</strong></p>
<hr />
<h3><a id="DMEASURE_CHECK">DMEASURE_CHECK</a></h3>
<p><a href="#DMEASURE">[Previous Routine]</a></p>
<p><a href="#DMEASURE_MULTI">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   dmeasure_check
 PURPOSE:
   visual check of measurements of deblended image
 CALLING SEQUENCE:
   dmeasure_check, image, ivar, measure=measure
 INPUTS:
   image - [nx,ny] input image
   measure - parameters of measurements
 OPTIONAL INPUTS:
   invvar - [nx,ny] input inverse variance [default to unity everywhere]
 REVISION HISTORY:
   10-Aug-2008  Written by Mike Blanton, NYU
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/detect/dmeasure_check.pro)</strong></p>
<hr />
<h3><a id="DMEASURE_MULTI">DMEASURE_MULTI</a></h3>
<p><a href="#DMEASURE_CHECK">[Previous Routine]</a></p>
<p><a href="#DMEDSMOOTH">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   dmeasure_multi
 PURPOSE:
   Measure multiple bands simultaneously
 CALLING SEQUENCE:
   dmeasure_multi, subdir
 COMMENTS:
   Assumes dimage-style detection outputs
 REVISION HISTORY:
   31-July-2010
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/detect/dmeasure_multi.pro)</strong></p>
<hr />
<h3><a id="DMEDSMOOTH">DMEDSMOOTH</a></h3>
<p><a href="#DMEASURE_MULTI">[Previous Routine]</a></p>
<p><a href="#DOBJECTS">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   dmedsmooth
 PURPOSE:
   median smooth 
 CALLING SEQUENCE:
   smooth= dmedsmooth(image, invvar, box=)
 INPUTS:
   image - [nx, ny] input image
   invvar - [nx, ny] invverse variance
   box - box size for smooth
 OUTPUTS:
   smooth - [nx, ny] smooth image
 COMMENTS:
   Doesn't weight by inverse variance: just ignores invvar=0 data
 REVISION HISTORY:
   11-Jan-2006  Written by Blanton, NYU
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/detect/dmedsmooth.pro)</strong></p>
<hr />
<h3><a id="DOBJECTS">DOBJECTS</a></h3>
<p><a href="#DMEDSMOOTH">[Previous Routine]</a></p>
<p><a href="#DPARENTS">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   dobjects
 PURPOSE:
   detect objects in multi-band, multi-res images
 CALLING SEQUENCE:
   dobjects, images, objects= [, dpsf=, plim=]
 INPUTS:
   images - [nim] pointer to images, OR 
            [nx,ny,nim] array of images
 OPTIONAL INPUTS:
   dpsf - smoothing of PSF for detection (defaults to sigma=1 pixel)
   plim - limiting significance in sky sigma (defaults to 10 sig )
   puse - [nim] 0 or 1 whether to use image to detect
 OUTPUTS:
   objects - [nim] pointer to object images OR 
             [nx, ny] object image; object image has which object
             each pixel belongs to (-1 if none)
   fobject - [max(nx), max(ny)] full object image at highest res
 COMMENTS:
   Any detected pixel in any band counts as a detection.
 REVISION HISTORY:
   11-Jan-2006  Written by Blanton, NYU
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/detect/dobjects.pro)</strong></p>
<hr />
<h3><a id="DPARENTS">DPARENTS</a></h3>
<p><a href="#DOBJECTS">[Previous Routine]</a></p>
<p><a href="#DPARENTS_ATLAS[1]">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   dparents
 PURPOSE:
   find parent objects in multi-band, multi-res images
 CALLING SEQUENCE:
   dparents, base, imfiles, [plim=, ref=, sky=, /noclobber ]
 INPUTS:
   base - base name for output
   imfiles - [Nband] array of FITS files with images in HDU 0
 OPTIONAL INPUTS:
   plim - significance to detect (default 5.)
   ref - integer indicating which imfile is the &quot;reference&quot;
   sky - if set, subtracts a median smoothed sky with this box size
         (in arcsec)
 OPTIONAL KEYWORDS:
   /noclobber - do not overwrite previously created files
   /cenonly - only output parent image for central object
 COMMENTS:
   Creates files:
      base-#-pimage.fits - image with parent number in each pixel
      base-#-pcat.fits - image with parent number in each pixel
      parents/base-parent-[parent].fits - multi-HDU file with
                                          individual parents
 REVISION HISTORY:
   11-Jan-2006  Written by Blanton, NYU
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/detect/dparents.pro)</strong></p>
<hr />
<h3><a id="DPARENTS_ATLAS[1]">DPARENTS_ATLAS[1]</a></h3>
<p><a href="#DPARENTS">[Previous Routine]</a></p>
<p><a href="#DPARENTS_ATLAS[2]">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   dparents_atlas
 PURPOSE:
   detect parents in NASA-Sloan Atlas images
 CALLING SEQUENCE:
   detect_parents
 OPTIONAL KEYWORDS:
   /galex - assume ugrizNF (N and F from GALEX)
   /nolobber - do not overwrite previously PARENT files
 COMMENTS:
   Detects parents
   Assumes input file names of the form:
      [base]-[ugriz].fits.gz
    where [base] is the current directory name. If /galex is set, 
    include -nd and -fd images from GALEX too.
   Assumes that the images are APPROXIMATELY overlapping
     (within a pixel or two)
   Assumes a sky-subtracted image in HDU 0
   Works better if ivars supplied in HDU 1
 REVISION HISTORY:
   11-Jan-2006  Written by Blanton, NYU
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/detect/dparents_atlas.pro)</strong></p>
<hr />
<h3><a id="DPARENTS_ATLAS[2]">DPARENTS_ATLAS[2]</a></h3>
<p><a href="#DPARENTS_ATLAS[1]">[Previous Routine]</a></p>
<p><a href="#DPEAKS">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   dparents_atlas
 PURPOSE:
   detect parents in NASA-Sloan Atlas images
 CALLING SEQUENCE:
   detect_parents
 OPTIONAL KEYWORDS:
   /galex - assume ugrizNF (N and F from GALEX)
   /nolobber - do not overwrite previously PARENT files
 COMMENTS:
   Detects parents
   Assumes input file names of the form:
      [base]-[ugriz].fits.gz
    where [base] is the current directory name. If /galex is set, 
    include -nd and -fd images from GALEX too.
   Assumes that the images are APPROXIMATELY overlapping
     (within a pixel or two)
   Assumes a sky-subtracted image in HDU 0
   Works better if ivars supplied in HDU 1
 REVISION HISTORY:
   11-Jan-2006  Written by Blanton, NYU
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/detect/dpsf_atlas.pro)</strong></p>
<hr />
<h3><a id="DPEAKS">DPEAKS</a></h3>
<p><a href="#DPARENTS_ATLAS[2]">[Previous Routine]</a></p>
<p><a href="#DPETRO">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   dpeaks
 PURPOSE:
   find peaks in an image
 CALLING SEQUENCE:
   dpeaks, image [, xcen=, ycen=, sigma=, dlim=, maxnpeaks=, $
      saddle=, minpeak=, npeaks=, /smooth, /checkpeaks, /refine, $
      /abssaddle ]
 INPUTS:
   image - [nx, ny] input image
 OPTIONAL INPUTS:
   sigma - sky sigma (defaults to estimate from dsigma.pro)
   dlim - limiting separation for identical peaks (default 1)
   maxnpeaks - maximum number of peaks to return (default 1000)
   minpeak - minimum peak value (defaults to 1 sigma)
   saddle - saddle point limit when checking peak separation ;
            in absolute units if /abssaddle set, in units of sigma 
            otherwise (default 3.)
 OPTIONAL KEYWORDS:
   /smooth - smooth a bit before finding
   /checkpeaks - check for peaks which are too connected to each other
   /refine - refines peak estimates
   /abssaddle - use absolue saddle point, not relative to peak
 OUTPUTS:
   xcen, ycen - [npeaks] positions of peaks
   npeaks - number of peaks
 COMMENTS:
   When /checkpeaks is set, checks whether saddle points between peak
     pairs are &gt; peak-saddle*sigma; if so, those peaks are joined.
   When /refine is not set, just finds to nearest pixel; when /refine
     is set, uses gaussian approximation to guess peak center.
   When /abssaddle is set, &quot;saddle&quot; yields the actual value the
     saddle point needs to exceed, not the number of sigma less than
     the peak
 REVISION HISTORY:
   11-Jan-2006  Written by Blanton, NYU
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/detect/dpeaks.pro)</strong></p>
<hr />
<h3><a id="DPETRO">DPETRO</a></h3>
<p><a href="#DPEAKS">[Previous Routine]</a></p>
<p><a href="#DPREFINE">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   dpetro
 PURPOSE:
   Measure Petrosian properties of a profile
 CALLING SEQUENCE:
   dpetro, nprof, profmean [, petrorad=, petroflux=, petror50=, $
     petror90=, petroratiolimit=, npetrorad= ]
 INPUTS:
   nprof - number of usable elements in profmean
   profmean - [nprof] profmean values
 OPTIONAL INPUTS:
   petroratiolimit - limit for Petrosian Ratio (default 0.2)
   npetrorad - number of Petrosian Radii out (default 2)
   cpetrorad - fixed petrosian radius to assume
 OUTPUTS:
   petrorad - Petrosian Radius (where Petrosian Ratio equals 
              petroratiolimit)
   petroflux - total Petrosian flux (within npetrorad*petrorad)
   petror90 - 90% light radius 
   petror50 - 50% light radius 
 REVISION HISTORY:
   28-Mar-2002  Written by Mike Blanton, NYU
   10-Aug-2008  Revised for new interp_profmean
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/detect/dpetro.pro)</strong></p>
<hr />
<h3><a id="DPREFINE">DPREFINE</a></h3>
<p><a href="#DPETRO">[Previous Routine]</a></p>
<p><a href="#DPSFCHECK">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   dprefine
 PURPOSE:
   refine a psf center
 CALLING SEQUENCE:
   dprefine, image, psf, xc, yc, [, xr=, yr= ]
 INPUTS:
   image - [nx, ny] image
   psf - [npx, npy] estimated psf
   xc, yc - [N] centers to refine around
 OUTPUTS:
   xr, yr - [N] output centers
 REVISION HISTORY:
   11-Jan-2006  Written by Blanton, NYU
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/detect/dprefine.pro)</strong></p>
<hr />
<h3><a id="DPSFCHECK">DPSFCHECK</a></h3>
<p><a href="#DPREFINE">[Previous Routine]</a></p>
<p><a href="#DPSFID">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   dpsfcheck
 PURPOSE:
   check how well a PSF fits some data
 CALLING SEQUENCE:
   ispsf= dpsfcheck(image, ivar, x, y [, psf=, amp= ])
 INPUTS:
   image - [nx, ny] input image
   ivar - [nx, ny] input invverse variance
   x, y - [N] positions to check
   psf - [npx, npy] PSF image
 OUTPUTS:
   ispsf - [N] 1 for PSF, 0 otherwise
   amp - amplitude of fit (after peak-normalizing PSF)
 COMMENTS:
   Fits a simple linear background plus the PSF.  Subtracts off the
   model, median smoothes the image in FWHM boxes, and calls it a PSF
   if the median smoothed image is &lt; 0.1 times the original image at
   the PSF peak. 
 REVISION HISTORY:
   1-Mar-2006  Written by Blanton, NYU
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/psf/dpsfcheck.pro)</strong></p>
<hr />
<h3><a id="DPSFID">DPSFID</a></h3>
<p><a href="#DPSFCHECK">[Previous Routine]</a></p>
<p><a href="#DPSFREAD">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   dpsfid
 PURPOSE:
   check how well a PSF fits some data
 CALLING SEQUENCE:
   ispsf= dpsfid(image, ivar, x, y [, psf=, amp= ])
 INPUTS:
   image - [nx, ny] input image
   ivar - [nx, ny] input invverse variance
   x, y - [N] positions to check
   psf - [npx, npy] PSF image
 OUTPUTS:
   ispsf - [N] 1 for PSF, 0 otherwise
   amp - amplitude of fit (after peak-normalizing PSF)
 REVISION HISTORY:
   1-Aug-2010  Written by Blanton, NYU
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/psf/dpsfid.pro)</strong></p>
<hr />
<h3><a id="DPSFREAD">DPSFREAD</a></h3>
<p><a href="#DPSFID">[Previous Routine]</a></p>
<p><a href="#DPSFSELECT_ATLAS">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   dpsfread
 PURPOSE:
   read a PSF structure from a file
 CALLING SEQUENCE:
   psfstr= dpsfread(psffile)
 INPUTS:
   psffile - input FITS file output by dpsffit
 OUTPUTS:
   psfstr - structure with:
             NX
             NY
             COEFFS[NP, NC]
             PSFT[NATLAS, NATLAS, NC]
 REVISION HISTORY:
   11-Jan-2006  Written by Blanton, NYU
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/psf/dpsfread.pro)</strong></p>
<hr />
<h3><a id="DPSFSELECT_ATLAS">DPSFSELECT_ATLAS</a></h3>
<p><a href="#DPSFREAD">[Previous Routine]</a></p>
<p><a href="#DPSFSUB">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   dpsfselect_atlas
 PURPOSE:
   check how well a PSF fits some data
 CALLING SEQUENCE:
   ispsf= dpsfselect_atlas(image, ivar, x, y [, psf=, amp= ])
 INPUTS:
   image - [nx, ny] input image
   ivar - [nx, ny] input invverse variance
   x, y - [N] positions to check
   psf - [npx, npy] PSF image
 OPTIONAL INPUTS:
   clipsize - size of region to calculation chi^2 from, in units
              of the PSF FWHM (default 5)
 OUTPUTS:
   ispsf - [N] 1 for PSF, 0 otherwise
   amp - amplitude of fit (after peak-normalizing PSF)
 REVISION HISTORY:
   1-Aug-2010  Written by Blanton, NYU
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/psf/dpsfselect_atlas.pro)</strong></p>
<hr />
<h3><a id="DPSFSUB">DPSFSUB</a></h3>
<p><a href="#DPSFSELECT_ATLAS">[Previous Routine]</a></p>
<p><a href="#DPSFSUB_ATLAS">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   dpsfsub
 PURPOSE:
   return an attempt at subtracting the fit PSF from some image
 CALLING SEQUENCE:
   subim= dpsfsub(imbas)
 INPUTS:
   imbase - file base name (full name should be imbase+'.fits.gz')
 OUTPUTS:
   subim - attempt at fitting and subtracting PSFs
 REVISION HISTORY:
   1-Mar-2006  Written by Blanton, NYU
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/psf/dpsfsub.pro)</strong></p>
<hr />
<h3><a id="DPSFSUB_ATLAS">DPSFSUB_ATLAS</a></h3>
<p><a href="#DPSFSUB">[Previous Routine]</a></p>
<p><a href="#DREADCEN">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   dpsfsub_atlas
 PURPOSE:
   subtract psfs 
 CALLING SEQUENCE:
   subim= dpsfsub_atlas([imbase=, image=, ivar=, psf=, x=, y=, flux=])
 OPTIONAL INPUTS:
   imbase - file base name (full name should be imbase+'.fits.gz')
   image - [nx,ny] image to analyze
   ivar - [nx,ny] ivar to analyze
   psf - [npx,npy] PSF of image
   nsigma - number of sigma to allow to call non-stellar (default 10)
   xex, yex, rex - one coordinate and radius within which to exclude
                   stars
 OPTIONAL INPUT/OUTPUTS:
   x, y - [nstars] best fit location of stars
   flux - [nstars] fluxes of each star
 OUTPUTS:
   subim - attempt at fitting and subtracting PSFs
   nstars - number of stars
 COMMENTS:
   Either image, ivar, AND psf are set, or imbase is set
 REVISION HISTORY:
   1-Mar-2006  Written by Blanton, NYU
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/psf/dpsfsub_atlas.pro)</strong></p>
<hr />
<h3><a id="DREADCEN">DREADCEN</a></h3>
<p><a href="#DPSFSUB_ATLAS">[Previous Routine]</a></p>
<p><a href="#DRECENTER">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   dreadcen
 PURPOSE:
   read central image
 REVISION HISTORY:
   31-July-2008
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/detect/dreadcen.pro)</strong></p>
<hr />
<h3><a id="DRECENTER">DRECENTER</a></h3>
<p><a href="#DREADCEN">[Previous Routine]</a></p>
<p><a href="#DREFINE">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   drecenter
 PURPOSE:
   find a better galaxy center using symmetric templates
 CALLING SEQUENCE:
   drecenter, image, xc, yc
 COMMENTS:
   Iterates starting with initial center to find one that maximizes
   flux associated with a symmetric template. 
 REVISION HISTORY:
   11-Aug-2008  Written by Blanton, NYU
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/detect/drecenter.pro)</strong></p>
<hr />
<h3><a id="DREFINE">DREFINE</a></h3>
<p><a href="#DRECENTER">[Previous Routine]</a></p>
<p><a href="#DSERSIC">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   drefine
 PURPOSE:
   refine some approximate centers
 CALLING SEQUENCE:
   drefine, image, xc, yc, [, box=, smooth=, xr=, yr= ]
 INPUTS:
   image - [nx, ny] image
   xc, yc - [N] centers to refine around
 OUTPUTS:
   xr, yr - [N] output centers
 OPTIONAL INPUTS:
   box - size of box to refine within (default 3)
   smooth - sigma for gaussian smoothing (default 0, no smoothing)
 COMMENTS:
   box sizes will be change to be odd, and &gt;=3.
 REVISION HISTORY:
   11-Jan-2006  Written by Blanton, NYU
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/detect/drefine.pro)</strong></p>
<hr />
<h3><a id="DSERSIC">DSERSIC</a></h3>
<p><a href="#DREFINE">[Previous Routine]</a></p>
<p><a href="#DSERSIC2">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   dsersic
 PURPOSE:
   run 2d sersic fitting on an image
 CALLING SEQUENCE:
   dsersic,image [,invvar,xcen=,ycen=,psf=,sersicfit=, $
      model=, /reinit, /fixsky, /fixcen]
 INPUTS:
   image - [nx,ny] input image
 OPTIONAL INPUTS:
   invvar - [nx,ny] input inverse variance [default to unity everywhere]
   xcen - center of image [default to nx/2L]
   ycen - center of image [default to ny/2L]
   psf - [nxpsf,nypsf] estimated psf [default to just pixel convolution]
   /reinit - don't use given sersicfit (if it exists) as initial conditions
   /fixcen - fix the center at the input xcen, ycen
   /fixsky - fix the sky to zero
 OUTPUTS:
   sersicfit - sersic parameters fit
   model - image of best fit model
 COMMENTS:
   The input psf should be interpreted as an image of a delta
    function source (pixel- and seeing-convolved)
 EXAMPLES:
   
 BUGS:
   sersic fitting by dsersic currently fails fake data tests
 PROCEDURES CALLED:
 REVISION HISTORY:
   10-Sep-2003  Written by Mike Blanton, NYU
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/sersic/dsersic.pro)</strong></p>
<hr />
<h3><a id="DSERSIC2">DSERSIC2</a></h3>
<p><a href="#DSERSIC">[Previous Routine]</a></p>
<p><a href="#DSERSIC_PARAMS">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   dsersic2
 PURPOSE:
   run 2d, two-component sersic fitting on an image
 CALLING SEQUENCE:
   dsersic2,image [,invvar, xcen=, ycen=, psf=, sersicfit=, $
      model=, seed=, /reinit, /fixsky, /fixcenter, /axisymmetric, /simple]
 INPUTS:
   image - [nx,ny] input image
 OPTIONAL INPUTS:
   invvar - [nx,ny] input inverse variance [default to unity everywhere]
   xcen - center of image [default to nx/2L]
   ycen - center of image [default to ny/2L]
   psf - [nxpsf,nypsf] estimated psf [default to just pixel convolution]
   seed - set seed for random initial conditions
 OPTIONAL KEYWORDS:
   /reinit - don't use given sersicfit (if it exists) as initial conditions
   /fixcenter - fix the center at the input xcen, ycen
   /fixsky - do not allow sky to float
   /axisymmetric - allow only axisymmetric fits
   /simple - do not do full sersic integration (faster but less accurate)
   /silent - shut up
   /scramble - forces scramble of angles even if sersicfit set
 INPUTS/OUTPUTS:
   sersicfit - sersic parameters fit (if set, and /reinit not, uses
               as starting point)
 OUTPUTS:
   model - image of best fit model
 COMMENTS:
   The input psf should be interpreted as an image of a delta
   function source (pixel- and seeing-convolved)
 REVISION HISTORY:
   10-Sep-2003  Written by Mike Blanton, NYU
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/sersic/dsersic2.pro)</strong></p>
<hr />
<h3><a id="DSERSIC_PARAMS">DSERSIC_PARAMS</a></h3>
<p><a href="#DSERSIC2">[Previous Routine]</a></p>
<p><a href="#DSHIFT">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   dsersic_params
 PURPOSE:
   given flux, r50, n  
 CALLING SEQUENCE:
   dsersic_params, flux, n, r50, amp=, r0=
 INPUTS:
   flux - flux
   n - Sersic index
   r50 - half-light radius
 OUTPUTS:
   amp - amplitude 
   r0 - radius
 COMMENTS:
   I(r)= amp*exp(-(r/r0)^(1/n))
 REVISION HISTORY:
   2003-09-21  Written MRB (NYU)
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/sersic/dsersic_params.pro)</strong></p>
<hr />
<h3><a id="DSHIFT">DSHIFT</a></h3>
<p><a href="#DSERSIC_PARAMS">[Previous Routine]</a></p>
<p><a href="#DSIGMA">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   dshift
 PURPOSE:
   shift in 2D with chosen interpolation
 CALLING SEQUENCE:
   newimage= dshift(image, xshift, yshift [, kernel=])
 INPUTS:
   image - [nx, ny] input image
   xshift, yshift, - shift in x and y
 OUTPUTS:
   newimage - [nx, ny] shifted image
 REVISION HISTORY:
   11-Oct-2009  Written by Blanton, NYU
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/detect/dshift.pro)</strong></p>
<hr />
<h3><a id="DSIGMA">DSIGMA</a></h3>
<p><a href="#DSHIFT">[Previous Routine]</a></p>
<p><a href="#DSMOOTH">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   dsigma
 PURPOSE:
   find approximate sigma from image
 CALLING SEQUENCE:
   sigma= dsigma(image)
 INPUTS:
   image - [nx, ny] input image
 OPTIONAL INPUTS:
   sp - spacing between nearby pixels (default 2)
 OUTPUTS:
   sigma - estimated sigma
 COMMENTS:
   Takes a bunch of differences between nearby pixels sparsely
   sampled across the image.
 REVISION HISTORY:
   2-Mar-2006  Written by Blanton, NYU (Fink's method)
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/detect/dsigma.pro)</strong></p>
<hr />
<h3><a id="DSMOOTH">DSMOOTH</a></h3>
<p><a href="#DSIGMA">[Previous Routine]</a></p>
<p><a href="#DSTARS">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   dsmooth
 PURPOSE:
   smooth with a simple gaussian
 CALLING SEQUENCE:
   smooth= dsmooth(image, sigma)
 INPUTS:
   image - [nx, ny] input image
   sigma - gaussian sigma
 OUTPUTS:
   smooth - [nx, ny] smooth image
 REVISION HISTORY:
   11-Jan-2006  Written by Blanton, NYU
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/detect/dsmooth.pro)</strong></p>
<hr />
<h3><a id="DSTARS">DSTARS</a></h3>
<p><a href="#DSMOOTH">[Previous Routine]</a></p>
<p><a href="#DSTARS_ATLAS">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   dstars
 PURPOSE:
   find stars in multi-band, multi-res images (called by dchildren)
 REVISION HISTORY:
   11-Jan-2006  Written by Blanton, NYU
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/detect/dstars.pro)</strong></p>
<hr />
<h3><a id="DSTARS_ATLAS">DSTARS_ATLAS</a></h3>
<p><a href="#DSTARS">[Previous Routine]</a></p>
<p><a href="#DTEMPLATES">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   dstars_atlas
 PURPOSE:
   find and subtract stars 
 COMMENTS:
   Identifies detectable stars in r-band; assumes that
     only those are relevant.
 REVISION HISTORY:
   11-Jan-2006  Written by Blanton, NYU
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/detect/dstars_atlas.pro)</strong></p>
<hr />
<h3><a id="DTEMPLATES">DTEMPLATES</a></h3>
<p><a href="#DSTARS_ATLAS">[Previous Routine]</a></p>
<p><a href="#DUMMY_PSF">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   dtemplates
 PURPOSE:
   build templates around centers  
 CALLING SEQUENCE:
   dtemplates, image, xc, yc, templates= [, parallel=, sigma=, /sersic]
 INPUTS:
   image - [nx, ny] input image
   xc, yc - [N] centers of templates 
 OPTIONAL KEYWORDS;
   /sersic - fit Sersic profile in 2D, and use to taper template
 OPTIONAL INPUTS:
   sigma - typical sky sigma (default is inferred from image)
 OUTPUTS:
   templates - [nx, ny, N] templates around each center
   parallel - how similar two templates are 
 REVISION HISTORY:
   11-Jan-2006  Written by Blanton, NYU, based on RHL deblend
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/detect/dtemplates.pro)</strong></p>
<hr />
<h3><a id="DUMMY_PSF">DUMMY_PSF</a></h3>
<p><a href="#DTEMPLATES">[Previous Routine]</a></p>
<p><a href="#DVPSF">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   dummy_psf
 PURPOSE:
   return a dummy psf for cases where it is unknown
 CALLING SEQUENCE:
   psfstr =dummy_psf(natlas, nx, ny)
 OUTPUTS:
   psfstr - structure with:
             NX
             NY
             COEFFS[NP, NC]
             PSFT[NATLAS, NATLAS, NC]
 COMMENTS:
   returns output like that of dpsfread()
 REVISION HISTORY:
   11-Jan-2006  Written by Blanton, NYU
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/detect/dummy_psf.pro)</strong></p>
<hr />
<h3><a id="DVPSF">DVPSF</a></h3>
<p><a href="#DUMMY_PSF">[Previous Routine]</a></p>
<p><a href="#DWEIGHTS">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   dvpsf
 PURPOSE:
   given a PSF structure, return the PSF at a particular point
 CALLING SEQUENCE:
   psf=dvpsf(x, y [, psfsrc=psfsrc)
 INPUTS:
   psfsrc - filename, or structure with:
             NX
             NY
             NP
             NC
             NATLAS
             COEFFS[NP*(NP+1)/2, NC]
             PSFT[NATLAS, NATLAS, NC]
   x, y - location to evaluate psf at
 COMMENTS:
   NATLAS is size of PSF image
   NP is number of polynomial terms in variable fit
   NC is number of components in fit
   Returns an NX by NY image of PSF at given location
 REVISION HISTORY:
   11-Jan-2006  Written by Blanton, NYU
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/psf/dvpsf.pro)</strong></p>
<hr />
<h3><a id="DWEIGHTS">DWEIGHTS</a></h3>
<p><a href="#DVPSF">[Previous Routine]</a></p>
<p><a href="#FIT_MULT_GAUSS">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   dweights
 PURPOSE:
   fit templates to image
 CALLING SEQUENCE:
   dweights, image, invvar, templates, weights= [, /nonneg ]
 INPUTS:
   image - [nx, ny] input image
   invvar - [nx, ny] input image
   templates - [nx, ny, N] centers of templates 
 OPTIONAL KEYWORDS;
   /nonneg - use nonnegative fitting routine
 OUTPUTS:
   weights - [N] weights assigned to each template
 REVISION HISTORY:
   11-Jan-2006  Written by Blanton, NYU, based on RHL deblend
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/detect/dweights.pro)</strong></p>
<hr />
<h3><a id="FIT_MULT_GAUSS">FIT_MULT_GAUSS</a></h3>
<p><a href="#DWEIGHTS">[Previous Routine]</a></p>
<p><a href="#GZ_FILE_TEST">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   fit_mult_gauss
 PURPOSE:
   fit multiple gaussians centered at center to an image
 CALLING SEQUENCE:
   fit_mult_gauss, image, ngauss, amp, sigma 
 INPUTS:
   image - image to fit
   ngauss - number of gaussians to fit
 OPTIONAL INPUTS:
 OUTPUTS:
   amp - [ngauss] amplitude of gaussians
   sigma - [ngauss] sigma of gaussians
 OPTIONAL INPUT/OUTPUTS:
 COMMENTS:
 EXAMPLES:
 BUGS:
 PROCEDURES CALLED:
 REVISION HISTORY:
   20-Aug-2003  Written by Mike Blanton, NYU
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/detect/dfit_mult_gauss.pro)</strong></p>
<hr />
<h3><a id="GZ_FILE_TEST">GZ_FILE_TEST</a></h3>
<p><a href="#FIT_MULT_GAUSS">[Previous Routine]</a></p>
<p><a href="#GZ_HEADFITS">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   gz_file_test
 PURPOSE:
   file_test, but if it fails, try reading in .gz version
 CALLING SEQUENCE:
   res= gz_file_test(file)
 REVISION HISTORY:
   27-Sep-2006  Written by Mike Blanton, NYU
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/utils/gz_file_test.pro)</strong></p>
<hr />
<h3><a id="GZ_HEADFITS">GZ_HEADFITS</a></h3>
<p><a href="#GZ_FILE_TEST">[Previous Routine]</a></p>
<p><a href="#GZ_MRDFITS">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   gz_headfits
 PURPOSE:
   headfits, but if it fails, try reading in .gz version
 CALLING SEQUENCE:
   str= gz_headfits([params for headfits])
 REVISION HISTORY:
   27-Sep-2006  Written by Mike Blanton, NYU
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/utils/gz_headfits.pro)</strong></p>
<hr />
<h3><a id="GZ_MRDFITS">GZ_MRDFITS</a></h3>
<p><a href="#GZ_HEADFITS">[Previous Routine]</a></p>
<p><a href="#SIMPLEXY">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   gz_mrdfits
 PURPOSE:
   mrdfits, but if it fails, try reading in .gz version
 CALLING SEQUENCE:
   str= gz_mrdfits([params for mrdfits])
 REVISION HISTORY:
   27-Sep-2006  Written by Mike Blanton, NYU
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/utils/gz_mrdfits.pro)</strong></p>
<hr />
<h3><a id="SIMPLEXY">SIMPLEXY</a></h3>
<p><a href="#GZ_MRDFITS">[Previous Routine]</a></p>
<p><a href="#TWOMASS_CONVERT">[Next Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   simplexy
 PURPOSE:
   get basic X and Y for brightish sources away from edge of an image
 CALLING SEQUENCE:
   simplexy, image, x, y, flux
 INPUTS:
   image - [nx, ny] input image
 OUTPUTS:
   x, y - [N] central positions
   flux - [N] central fluxes
 REVISION HISTORY:
   1-Mar-2006  Written by Blanton, NYU
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/utils/simplexy.pro)</strong></p>
<hr />
<h3><a id="TWOMASS_CONVERT">TWOMASS_CONVERT</a></h3>
<p><a href="#SIMPLEXY">[Previous Routine]</a></p>
<p><a href="#ROUTINELIST">[List of Routines]</a></p>
<pre>
 NAME:
   twomass_convert
 PURPOSE:
   convert twomass images to sky-subtracted versions with nice names
 CALLING SEQUENCE:
   twomass_convert, jfile, hfile, kfile, outbase
 COMMENTS:
   Converts all images into nmgy per pixel
   Subtracts out a constant median value across the whole frame.
   Creates an ivar HDU based on sigma (assuming variance scales
     proportional to un-sky-subtacted flux)
 REVISION HISTORY:
   11-Jan-2006  Written by Blanton, NYU
</pre>
<p><strong>(See /home/users/mb144/dimage/pro/utils/twomass_convert.pro)</strong></p>
<hr />
</body>
</html>
